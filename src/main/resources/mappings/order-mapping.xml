<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="mappings.order-mapping">

	<!-- 전체 주문내역 조회 -->
	<select id="listOrder" resultType="order">
		SELECT * FROM order_view
		WHERE name LIKE '%'||#{key}||'%'
		ORDER BY result, oseq DESC
	</select>
	
	<!-- 주문완료 처리 -->
	<update id="updateOrderResult">
		UPDATE order_detail 
		   SET result='y'
		 WHERE odseq=#{odseq}  
	</update>
	
</mapper>